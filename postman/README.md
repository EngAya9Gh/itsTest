# Postman Collections for ItsTest API

هذا المجلد يحتوي على ملفات Postman لاختبار API الخاص بالمشروع.

## الملفات المتوفرة

1. **AuthController.postman_collection.json** - مجموعة طلبات تسجيل الدخول والتسجيل
2. **ApiServiceOrderController.postman_collection.json** - مجموعة طلبات إنشاء طلبات الخدمات
3. **ItsTest.postman_environment.json** - ملف البيئة الذي يحتوي على المتغيرات

## كيفية الاستخدام

### 1. استيراد الملفات إلى Postman

1. افتح Postman
2. اضغط على "Import" في الزاوية العلوية اليسرى
3. اسحب وأفلت الملفات الثلاثة أو اختر "Upload Files"
4. حدد الملفات الثلاثة واضغط "Import"

### 2. تفعيل البيئة

1. في الزاوية العلوية اليمنى، اختر "ItsTest Environment" من قائمة البيئات
2. تأكد من أن البيئة مفعلة (ستظهر بلون مختلف)

### 3. تسجيل الدخول والحصول على التوكن

1. افتح مجموعة "AuthController - Login & Registration"
2. **إذا كان لديك حساب موجود:**
   - استخدم طلب "Login User"
   - تأكد من أن `email` و `password` صحيحان في البيئة
   - اضغط "Send"
   - سيتم حفظ التوكن تلقائياً في البيئة

3. **إذا لم يكن لديك حساب:**
   - استخدم طلب "Register New User" أولاً
   - تأكد من أن البيانات صحيحة في البيئة
   - اضغط "Send"
   - سيتم حفظ التوكن تلقائياً في البيئة

### 4. اختبار طلبات الخدمات

1. افتح مجموعة "ApiServiceOrderController"
2. تأكد من أن التوكن محفوظ في البيئة (يجب أن يظهر في متغير `token`)
3. حدد `service_id` و `price` المناسبين في البيئة
4. اختر نوع الطلب المناسب:
   - **Place Service Order (IMEI)** - للخدمات من نوع IMEI
   - **Place Service Order (SERVER)** - للخدمات من نوع SERVER
   - **Place Service Order (Generic)** - للخدمات العامة

## المتغيرات في البيئة

- `baseUrl`: عنوان API الأساسي (http://localhost:8082/api)
- `token`: التوكن الخاص بالمصادقة (يتم تعيينه تلقائياً بعد تسجيل الدخول)
- `email`: البريد الإلكتروني للمستخدم
- `password`: كلمة المرور
- `name`: اسم المستخدم
- `service_id`: معرف الخدمة
- `price`: سعر الخدمة
- `id`: معرف عام (يتم تعيينه تلقائياً من service_id)

## ملاحظات مهمة

1. **التوكن يتم حفظه تلقائياً** بعد تسجيل الدخول الناجح
2. **تأكد من تشغيل الخادم** على المنفذ 8082
3. **تحقق من البيانات** في البيئة قبل إرسال الطلبات
4. **استخدم "Check Auth Status"** للتأكد من صحة التوكن
5. **استخدم "Logout User"** لإنهاء الجلسة وحذف التوكن

## استكشاف الأخطاء

### خطأ "Method Not Allowed"
- تأكد من أن `id` في URL ليس فارغاً
- تحقق من أن `service_id` محدد في البيئة

### خطأ "Unauthorized"
- تأكد من تسجيل الدخول أولاً
- تحقق من أن التوكن محفوظ في البيئة
- جرب تسجيل الدخول مرة أخرى

### خطأ "Validation Error"
- تحقق من أن جميع الحقول المطلوبة موجودة
- تأكد من أن `service_id` يشير إلى خدمة موجودة
- تحقق من أن `price` رقم صحيح
